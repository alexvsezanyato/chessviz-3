# Сhessviz. Шахматы [![Build Status](https://travis-ci.org/alexvsezanyato/chessviz-3.svg?branch=master)](https://travis-ci.org/alexvsezanyato/chessviz-3)

## Функциональность приложения
Существует ряд шахматных нотаций для записи партии. Однако текстовая запись может быть неудобна для анализа. Вам необходимо разработать приложение chessviz для визуализации расположения фигур на доске по записи партии в алгебраической нотации. Запись ходов может содержать ошибки, ваше приложение должно сообщать о них пользователю.

## Формат входных данных
На вход приложение принимает список ходов, разделенных символом перевода строки. Запись хода состоит из таких компонентов:

* Тип фигуры, выполняющей ход (король, конь и т. д.).
* Поле, с которого сделан ход.
* Для тихого хода — дефис (-). Для взятия — буква x.
* Поле, на которое сделан ход.
* Если пешка совершила превращение, после целевого поля указывается фигура, которой она стала.
* Для взятия на проходе — знак e.p. (фр. en passant).
* Для шаха — знак плюс (+). Для мата — решётка (#).
* Грамматика (pseudo-EBNF):

  СписокХодов = {ЗаписьХода ПереводСтроки}
  ЗаписьХода = НомерХода. Ход Ход
  Ход = [ТипФигуры] Поле ТипХода Поле [ТипФигуры | 'e.p.' | '+' | '#']
    | Рокировка
  ТипФигуры = 'K' | 'Q' | 'R' | 'B' | 'N'
  Поле = /[a-h][1-8]/
  ТипХода = '-' | 'x'
  Рокировка = '0-0-0' | '0-0'

**Пример:**

  1. e2-e4 e7-e5
  2. Bf1-c4 Nb8-c6
  3. Qd1-h5 Ng8-f6
  4. Qh5xf7#

## Проверки корректности входных данных
При обнаружении ошибки во входных данных приложение прекращает свою работу, выводит человекопонятное сообщение, достаточное для диагностики ошибки, и завершается с ненулевым кодом.

**Easy**
Проверки диапазонов: все поля (начало и конец хода) должны быть в пределах доски.

**Normal**
В дополнение к проверкам из предыдущих пунктов:

- Обозначения фигур должны соответствовать фактическим (нельзя взять коня с поля, на котором стоял слон).
- Тип хода должен соответствовать фактическому. Например, если во входных данных записано взятие, а в конечной ячейке нет фигуры соперника, то сообщить об ошибке. Взятие на проходе не рассматриваем.

**Hard**
В дополнение к проверкам из предыдущих пунктов:

Проверки соблюдения правил движения фигур (слон движется только по диагонали, только конь может перешагивать через фигуры и т. д.).
Проверка очередности ходов.
Nightmare
В дополнение к проверкам из предыдущих пунктов:

Проверки допустимости рокировки, см. Рокировка (wiki)
Нарушения формата входных данных: отсутствие любого обязательного компонента записи хода или наличие лишних элементов, некорректные символы (например, недопустимые обозначения фигур) и т. д.
Формат выходных данных
После запуска приложение выводит в stdout номер хода, ход и состояние доски после него. Вывод может быть в текстовом формате и/или html. В случае реализации двух форматов вывода пользователь может выбрать формат с помощью опции командной строки. Возможные варианты синтаксиса:

`chessviz [--text|--html]`
`chessviz [--output=<text|html>]`

**Текстовый формат**
Белые фигуры обозначаются символами в верхнем регистре, черные — символами в нижнем регистре.

Обозначение	Фигура
K	Король (king)
Q	Ферзь (queen)
R	Ладья (rook)
N	Конь (kNight)
B	Слон (bishop)
P	Пешка (pawn)

**Пример:**

1. e2-e4

8 r n b q k b n r
7 p p p p p p p p
6
5
4         P
3
2 P P P P   P P P
1 R N B Q K B N R
  a b c d e f g h

**Входные данные:**

1. e2-e4 e7-e5
2. Bf1-c4 Nb8-c6
3. Qd1-h5 Ng8-f6
4. Qh5xf7#
